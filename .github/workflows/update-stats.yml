name: Update WakaTime Stats

on:
  schedule:
    - cron: "0 * * * *"           # 每小时整点（UTC）执行一次
  workflow_dispatch:               # 允许手动触发
  push:
    paths:
      - ".github/workflows/update-wakatime.yml"
      - "README.md"

permissions:
  contents: write                  # 允许对 README 提交更新

concurrency:
  group: waka-readme
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Update README with WakaTime metrics
        uses: anmol098/waka-readme-stats@master
        with:
          WAKATIME_API_KEY: ${{ secrets.WAKATIME_API_KEY }}   # 必填：你的 WakaTime API Key
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}               # 用于提交 README 的内置令牌
          # ---- 常用开关（均为可选，未识别的项会被忽略，不会报错）----
          SECTION_NAME: "waka"            # 对应 README 里的 START/END_SECTION 名称
          COMMIT_MESSAGE: "chore: update WakaTime stats"
          TIME_RANGE: "last_7_days"       # 统计周期：last_7_days / last_30_days / all_time
          SHOW_TOTAL: "True"              # 展示总编码时长徽章
          SHOW_TIME: "True"               # 展示“本周花费时间”板块
          SHOW_EDITORS: "True"            # 展示 Editors 小节（VS Code 等）
          SHOW_LANGUAGE: "True"           # 展示 Languages 小节
          SHOW_OS: "False"                # 不展示操作系统分布
          SHOW_PROJECTS: "False"          # 不展示最近项目
          SHOW_UPDATED_DATE: "True"       # 显示“Last Updated”时间
          LOCALE: "en"                    # 输出语言（也可用 zh-CN）
          # 下面两项不是所有版本都支持；若无效会被忽略
          SHOW_DAYS_OF_WEEK: "True"       # “I'm a Night Owl”这类作息分布
          SHOW_TIMEZONE: "True"           # 显示时区
          # -----------------------------------------------
